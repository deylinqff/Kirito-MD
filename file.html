<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Subir Im치genes y Obtener Enlaces</title>
    <style>
        body { font-family: Arial, sans-serif; text-align: center; padding: 20px; }
        input { margin-bottom: 10px; }
        .enlace-container { margin-top: 10px; padding: 10px; border: 1px solid #ddd; display: flex; flex-direction: column; align-items: center; }
        .enlace { margin: 5px 0; }
        button { cursor: pointer; margin-left: 5px; }
    </style>
</head>
<body>

    <h2>Subir Im치genes y Obtener Enlaces</h2>
    <input type="file" id="fileInput" multiple accept="image/*">
    <button onclick="uploadImages()">Subir</button>
    
    <div id="linksContainer"></div>

    <script>
        async function uploadImage(file) {
            let formData = new FormData();
            formData.append("file", file);

            try {
                let res = await fetch("https://file.io", {
                    method: "POST",
                    body: formData
                });
                let json = await res.json();
                return json.success ? json.link : null;
            } catch {
                return null;
            }
        }

        async function shortUrl(url) {
            let res = await fetch(`https://tinyurl.com/api-create.php?url=${url}`);
            return await res.text();
        }

        async function uploadImages() {
            let files = document.getElementById("fileInput").files;
            if (files.length === 0) {
                alert("Selecciona al menos una imagen.");
                return;
            }

            let linksContainer = document.getElementById("linksContainer");
            linksContainer.innerHTML = "<p>Subiendo im치genes...</p>";

            let linksHtml = "";

            for (let file of files) {
                let url = await uploadImage(file);
                if (url) {
                    let shortLink = await shortUrl(url);
                    linksHtml += `
                        <div class="enlace-container">
                            <p class="enlace"><strong>Enlace:</strong> <a href="${url}" target="_blank">${url}</a></p>
                            <p class="enlace"><strong>Acortado:</strong> <a href="${shortLink}" target="_blank">${shortLink}</a></p>
                            <button onclick="copyToClipboard('${shortLink}')">Copiar Enlace</button>
                        </div>
                    `;
                }
            }

            linksContainer.innerHTML = linksHtml || "<p>Error al subir im치genes.</p>";
        }

        function copyToClipboard(text) {
            navigator.clipboard.writeText(text).then(() => {
                alert("Enlace copiado al portapapeles.");
            });
        }
    </script>

</body>
</html>