<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Subir Im치genes a Catbox</title>
    <style>
        body { font-family: Arial, sans-serif; text-align: center; padding: 20px; }
        input { margin-bottom: 10px; }
        .enlace-container { margin-top: 10px; padding: 10px; border: 1px solid #ddd; display: flex; flex-direction: column; align-items: center; }
        .enlace { margin: 5px 0; }
        button { cursor: pointer; margin-left: 5px; }
    </style>
</head>
<body>

    <h2>Subir Im치genes y Obtener Enlaces</h2>
    <input type="file" id="fileInput" multiple accept="image/*,video/*">
    <button onclick="uploadImages()">Subir</button>
    
    <div id="linksContainer"></div>

    <script>
        async function uploadImage(file) {
            const formData = new FormData();
            formData.append("reqtype", "fileupload");
            formData.append("fileToUpload", file);

            try {
                let res = await fetch("https://catbox.moe/user/api.php", {
                    method: "POST",
                    body: formData,
                    headers: {
                        "User-Agent": "Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/44.0.2403.157 Safari/537.36"
                    },
                });

                let link = await res.text();
                if (link.includes("Error")) {
                    return null;
                }
                return link;
            } catch (error) {
                console.error("Error al subir imagen:", error);
                return null;
            }
        }

        async function uploadImages() {
            let files = document.getElementById("fileInput").files;
            if (files.length === 0) {
                alert("Selecciona al menos una imagen.");
                return;
            }

            let linksContainer = document.getElementById("linksContainer");
            linksContainer.innerHTML = "<p>Subiendo im치genes...</p>";

            let linksHtml = "";

            for (let file of files) {
                let url = await uploadImage(file);
                if (url) {
                    linksHtml += `
                        <div class="enlace-container">
                            <p class="enlace"><strong>Enlace:</strong> <a href="${url}" target="_blank">${url}</a></p>
                            <button onclick="copyToClipboard('${url}')">Copiar Enlace</button>
                        </div>
                    `;
                }
            }

            linksContainer.innerHTML = linksHtml || "<p>Error al subir im치genes.</p>";
        }

        function copyToClipboard(text) {
            navigator.clipboard.writeText(text).then(() => {
                alert("Enlace copiado al portapapeles.");
            });
        }
    </script>

</body>
</html>